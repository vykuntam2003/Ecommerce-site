<template>
    <div class="card">
       <template lwc:if={isMaintenance}>
    <div class="maintenance-banner">
        <div class="marquee-container">
            <div class="marquee-text">
                <lightning-icon 
                    icon-name="utility:warning" 
                    variant="inverse" 
                    size="x-small" 
                    class="slds-m-right_small">
                </lightning-icon>
                <span> {maintenanceMessage}</span>
                
                <span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                
                <lightning-icon 
                    icon-name="utility:warning" 
                    variant="inverse" 
                    size="x-small" 
                    class="slds-m-right_small">
                </lightning-icon>
                <span> {maintenanceMessage}</span>

                 <span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                
                <lightning-icon 
                    icon-name="utility:warning" 
                    variant="inverse" 
                    size="x-small" 
                    class="slds-m-right_small">
                </lightning-icon>
                <span> {maintenanceMessage}</span>
            </div>
        </div>
    </div>
</template>
        
    <div class="logoutCart">
        <!-- Profile menu replacing direct Sign out -->
        <div class="profile-menu">
            <lightning-button-icon
                icon-name="utility:user"
                alternative-text="Profile"
                variant="bare"
                class="profile-trigger"
                onclick={toggleProfileMenu}>
            </lightning-button-icon>

            <template if:true={isProfileMenuOpen}>
                <section class="slds-dropdown slds-dropdown_right slds-dropdown_actions profile-dropdown" role="menu" onmouseleave={closeProfileMenu}>
                    <ul class="slds-dropdown__list" role="presentation">
                        <li class="slds-dropdown__item" role="presentation">
                            <a role="menuitem" tabindex="0" onclick={handleProfileDetails}>
                                <span class="slds-truncate" title="Profile Details">Profile Details</span>
                            </a>
                        </li>
                        <li class="slds-dropdown__item" role="presentation">
                            <a role="menuitem" tabindex="0" onclick={handleMyCases}>
                                <span class="slds-truncate" title="My Cases">My Cases</span>
                            </a>
                        </li>
                        <li class="slds-dropdown__item" role="presentation">
                            <a role="menuitem" tabindex="0" onclick={handleLogout}>
                                <span class="slds-truncate" title="Sign Out">Sign Out</span>
                            </a>
                        </li>
                    </ul>
                </section>
            </template>
        </div>
    </div>

    <div class="cart">
        <lightning-button-icon icon-name="utility:cart" onclick={navigateToCart}></lightning-button-icon>
        <lightning-icon icon-name="utility:money" onclick={navigateToWallet}></lightning-icon> 
    </div>

    <div class="buttonsbackground">
        <button class="hamburger-btn" onclick={toggleMenu}>
        <!-- Hamburger SVG -->
        <svg viewBox="0 0 100 80" width="40" height="40">
            <rect width="100" height="10"></rect>
            <rect y="30" width="100" height="10"></rect>
            <rect y="60" width="100" height="10"></rect>
        </svg>
        </button>
       
        <div class="homes">
        <lightning-button icon-name="utility:home" variant="Base" onclick={navigateToHomePage} class="custom-button"></lightning-button>
        </div>
        <lightning-button label="Products" variant="Base" onclick={navigationToProducts} class="custom-button"></lightning-button>
        <lightning-button label="Payment History" variant = "Base" onclick={navigateToPayments} class="custom-button"></lightning-button>
        <lightning-button label="Support" variant="Base" onclick={navigationToSupport} class="custom-button"></lightning-button>
    </div>

    <template lwc:if={isHamburgerMenuOpen}>
    <c-hamburger-menu oncategoryselect={handleCategorySelect} onclosemenu={closeHamburgerMenu}></c-hamburger-menu>
    </template>
    
    <template if:true={isWallet}>
    <c-wallet-panel></c-wallet-panel>
    </template>

    <template if:true={isHome}>
        <c-home-page></c-home-page>
    </template>

    <template if:true={isProducts}>
        <c-products
            onaddtocart={handleAddToCart}
            onopenproduct={openProductPage}
            onbuynow={goCheckout}
            category={selectedCategory}>
        </c-products>
    </template>

    <template if:true={isProductDetails}>
        <c-product-modal
            product-id={selectedProduct}
            onback={goBackFromProduct}
            onbuynow={goCheckout}
            onaddtocart={handleAddToCart}>
        </c-product-modal>
    </template>

    <template if:true={isSupport}>
        <c-support-page></c-support-page>
    </template>

    <template if:true={isCart}>
        <c-cart-page cart-items={cartItems} onbuynow={goCheckout} onbuyall={goCheckout}></c-cart-page>
    </template>

    <template if:true={isCheckout}>
        <c-checkout-page product={checkoutItem} products={checkoutItems} oncancel={cancel} onorderplaced={handleOrderPlaced} ></c-checkout-page>
    </template>

    <template if:true={isPayments}>
        <c-payment-history></c-payment-history>
    </template>

    <template if:true={isProfile}>
        <c-profile-page></c-profile-page>
    </template>

    <template if:true={isCases}>
        <c-my-cases></c-my-cases>
    </template>

    <template if:true={showCartPopup}>
        <c-cart-quantity-page
            product={popupItem}
            onincrease={handleIncrease}
            ondecrease={handleDecrease}
            onclosemodal={closePopup}>
        </c-cart-quantity-page>
    </template>
    </div>
</template>